{"ast":null,"code":"var _jsxFileName = \"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/pages/system/role/role.jsx\";\nimport React, { Component } from 'react';\nimport { Card, Button, Table, Space } from 'antd';\nimport { reqRoleList, reqUserList } from '../../../api/api.js';\nimport RoleAdd from '../role/roleAdd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Role extends Component {\n  constructor() {\n    super();\n\n    this.initColumn = () => {\n      this.columns = [{\n        title: '序号',\n        render: (text, record, index) => {\n          return /*#__PURE__*/_jsxDEV(\"span\", {\n            children: (this.state.pagination.current - 1) * this.state.pagination.pageSize + (index + 1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 25\n          }, this);\n        }\n      }, {\n        title: '角色名称',\n        dataIndex: 'name'\n      }, {\n        title: '描述信息',\n        dataIndex: 'description'\n      }, {\n        title: '排序码',\n        dataIndex: 'sort'\n      }, {\n        title: '启用状态',\n        dataIndex: 'enabled'\n      }, {\n        title: '创建时间',\n        dataIndex: 'gmtCreate'\n      }, {\n        title: '操作',\n        render: obj => /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(Space, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => this.showEdit(obj),\n              children: \"\\u7F16\\u8F91\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"danger\",\n              onClick: () => this.deleteUser(obj.id),\n              children: \"\\u5220\\u9664\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }];\n    };\n\n    this.getRoleList = async (current = 1, pageSize = 20) => {\n      const {\n        pagination\n      } = this.state;\n      const data = this.formRef.current.getFieldsValue();\n      data.pageNum = current;\n      data.pageSize = pageSize;\n      const result = await reqRoleList(data);\n\n      if (result.code === 200) {\n        // const data = result.data.records;\n        const data = result.data;\n        console.log(JSON.stringify(data));\n        this.setState({\n          list: data,\n          pagination: { ...pagination,\n            total: result.data.total,\n            current: current,\n            pageSize: pageSize\n          }\n        });\n      }\n    };\n\n    this.toggleVisible = status => {\n      this.setState({\n        showStatus: status\n      });\n    };\n\n    this.state = {\n      list: [],\n      selectedRowKeys: [],\n      pagination: {\n        total: 0,\n        current: 1,\n        pageSize: 20,\n        pageSizeOptions: [20, 30, 50, 100],\n        showQuickJumper: true,\n        showSizeChanger: true\n      },\n      modalStatus: 'add',\n      modalIsVisible: false\n    };\n  }\n\n  componentWillMount() {\n    this.initColumn();\n  }\n\n  componentDidMount() {\n    this.getRoleList();\n  }\n\n  render() {\n    const {\n      roleList,\n      showStatus\n    } = this.state;\n\n    const title = /*#__PURE__*/_jsxDEV(\"span\", {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: () => this.toggleVisible(1),\n        children: \"\\u65B0\\u589E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(Card, {\n      title: title,\n      children: [/*#__PURE__*/_jsxDEV(Table, {\n        rowKey: \"id\",\n        rowSelection: {\n          type: \"checkout\"\n        },\n        columns: this.columns,\n        dataSource: roleList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RoleAdd, {\n        visible: showStatus,\n        toggleVisible: this.toggleVisible,\n        onRefresh: this.getRoleList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Role;","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/pages/system/role/role.jsx"],"names":["React","Component","Card","Button","Table","Space","reqRoleList","reqUserList","RoleAdd","Role","constructor","initColumn","columns","title","render","text","record","index","state","pagination","current","pageSize","dataIndex","obj","showEdit","deleteUser","id","getRoleList","data","formRef","getFieldsValue","pageNum","result","code","console","log","JSON","stringify","setState","list","total","toggleVisible","status","showStatus","selectedRowKeys","pageSizeOptions","showQuickJumper","showSizeChanger","modalStatus","modalIsVisible","componentWillMount","componentDidMount","roleList","type"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Card, Button, Table, Space} from 'antd'\n\nimport {reqRoleList, reqUserList} from '../../../api/api.js'\n\nimport RoleAdd from '../role/roleAdd'\n\nclass Role extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            list: [],\n            selectedRowKeys: [],\n            pagination: {\n                total: 0,\n                current: 1,\n                pageSize: 20,\n                pageSizeOptions: [20, 30, 50, 100],\n                showQuickJumper: true,\n                showSizeChanger: true\n            },\n            modalStatus: 'add',\n            modalIsVisible: false\n        }\n    }\n\n    initColumn = () => {\n        this.columns = [\n            {\n                title: '序号',\n                render: (text, record, index) => {\n                    return (\n                        <span>{(this.state.pagination.current - 1) * this.state.pagination.pageSize + (index + 1)}</span>\n                    )\n                }\n            },\n            {\n                title: '角色名称',\n                dataIndex: 'name',\n            },\n            {\n                title: '描述信息',\n                dataIndex: 'description',\n            },\n            {\n                title: '排序码',\n                dataIndex: 'sort',\n            },\n            {\n                title: '启用状态',\n                dataIndex: 'enabled',\n            },\n            {\n                title: '创建时间',\n                dataIndex: 'gmtCreate',\n            }, {\n                title: '操作',\n                render: (obj) => (\n                    <span>\n                        <Space>\n                            <Button onClick={() => this.showEdit(obj)}>编辑</Button>\n                            <Button type='danger' onClick={() => this.deleteUser(obj.id)}>删除</Button>\n                        </Space>\n                    </span>\n                )\n            }\n        ]\n    }\n\n    getRoleList = async (current = 1, pageSize = 20) => {\n        const {pagination} = this.state;\n\n        const data = this.formRef.current.getFieldsValue();\n        data.pageNum = current;\n        data.pageSize = pageSize;\n\n        const result = await reqRoleList(data);\n        if (result.code === 200) {\n            // const data = result.data.records;\n            const data = result.data;\n            console.log(JSON.stringify(data))\n            this.setState({\n                list: data,\n                pagination: {\n                    ...pagination,\n                    total: result.data.total,\n                    current: current,\n                    pageSize: pageSize\n                }\n            })\n        }\n    }\n\n    // getRoleList = async () => {\n    //     const result = await reqRoleList();\n    //     if (result.code === 200) {\n    //         const data = result.data.records;\n    //         this.setState({roleList: data})\n    //     }\n    // }\n    //列表搜索\n\n    //显示添加组件\n    toggleVisible = (status) => {\n        this.setState({\n            showStatus: status\n        })\n    }\n\n    componentWillMount() {\n        this.initColumn();\n    }\n\n    componentDidMount() {\n        this.getRoleList();\n    }\n\n    render() {\n\n        const {roleList, showStatus} = this.state;\n        const title = (\n            <span>\n                <Button type=\"primary\" onClick={() => this.toggleVisible(1)}>新增</Button>\n            </span>\n        )\n\n        return (\n            <Card title={title}>\n                <Table\n                    rowKey=\"id\"\n                    rowSelection={{type: \"checkout\"}}\n                    columns={this.columns}\n                    dataSource={roleList}/>\n                <RoleAdd visible={showStatus} toggleVisible={this.toggleVisible} onRefresh={this.getRoleList}/>\n            </Card>\n        );\n    }\n}\n\nexport default Role;"]},"metadata":{},"sourceType":"module"}