{"ast":null,"code":"import _classCallCheck from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link,withRouter}from'react-router-dom';import{Menu}from'antd';import'./nav.css';import logo from'../../assets/images/log.jpg';import menuList from'../../config/menuConfig';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SubMenu=Menu.SubMenu;var Nav=/*#__PURE__*/function(_Component){_inherits(Nav,_Component);var _super=_createSuper(Nav);function Nav(){var _this;_classCallCheck(this,Nav);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={collapsed:false};_this.getMenuNodes_map=function(menuList){return menuList.map(function(item){if(!item.children){return/*#__PURE__*/_jsxs(Menu.Item,{children:[item.icon,/*#__PURE__*/_jsx(Link,{to:item.url,children:item.title})]},item.key);}else{return/*#__PURE__*/_jsx(SubMenu,{icon:item.icon,title:item.title,children:_this.getMenuNodes_map(item.children)},item.key);}});};_this.getMenuNodes_reduce=function(menuList){var path=_this.props.location.pathname;return menuList.reduce(function(pre,item){//向pre添加<Menu.Item>\n//向pre添加<SubMenu>\nif(!item.children){pre.push(/*#__PURE__*/_jsxs(Menu.Item,{children:[item.icon,/*#__PURE__*/_jsx(Link,{to:item.url,children:item.title})]},item.key));}else{//查找一个与当前路径匹配的子item\nvar cItem=item.children.find(function(cItem){return cItem.key===path;});//如果存在，说明当前item的子列表需要打开\nif(cItem){_this.openKey=item.key;}pre.push(/*#__PURE__*/_jsx(SubMenu,{icon:item.icon,title:item.title,children:_this.getMenuNodes_map(item.children)},item.key));}return pre;},[]);};return _this;}_createClass(Nav,[{key:\"componentWillMount\",value:function componentWillMount(){this.menuNodes=this.getMenuNodes_reduce(menuList);}},{key:\"render\",value:function render(){var path=this.props.location.pathname;var openKey=this.openKey;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"nav-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"RBAC\"})}),/*#__PURE__*/_jsx(Menu,{selectedKeys:[path],defaultOpenKeys:[openKey],mode:\"inline\",theme:\"dark\",children:this.menuNodes})]})});}}]);return Nav;}(Component);//withRouter高阶组件：包装非路由组件，返回一个新的组件。\n//新的组件向非路由组件传递3个属性：history、location、match\nexport default withRouter(Nav);// export default Nav","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/components/nav/nav.jsx"],"names":["React","Component","Link","withRouter","Menu","logo","menuList","SubMenu","Nav","state","collapsed","getMenuNodes_map","map","item","children","icon","url","title","key","getMenuNodes_reduce","path","props","location","pathname","reduce","pre","push","cItem","find","openKey","menuNodes"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom'\nimport { Menu } from 'antd';\nimport './nav.css';\nimport logo from '../../assets/images/log.jpg';\nimport menuList from '../../config/menuConfig'\n\n\nconst { SubMenu } = Menu;\nclass Nav extends Component {\n\n    state = {\n        collapsed: false,\n    };\n\n    //map+递归\n    getMenuNodes_map = (menuList) => {\n        return menuList.map(item => {\n            if (!item.children) {\n                return (\n                    <Menu.Item key={item.key} >\n                        {item.icon}\n                        <Link to={item.url}>{item.title}</Link>\n                    </Menu.Item>\n                )\n            } else {\n                return (\n                    <SubMenu key={item.key} icon={item.icon} title={item.title}>\n                        {this.getMenuNodes_map(item.children)}\n                    </SubMenu>\n                )\n            }\n\n        })\n    }\n\n    //reduce+递归\n    getMenuNodes_reduce = (menuList) => {\n\n        const path = this.props.location.pathname;\n\n        return menuList.reduce((pre, item) => {\n            //向pre添加<Menu.Item>\n            //向pre添加<SubMenu>\n            if (!item.children) {\n                pre.push(\n                    (\n                        <Menu.Item key={item.key} >\n                            {item.icon}\n                            <Link to={item.url}>{item.title}</Link>\n                        </Menu.Item>\n                    )\n                )\n            } else {\n                //查找一个与当前路径匹配的子item\n                const cItem = item.children.find(cItem => cItem.key === path)\n                //如果存在，说明当前item的子列表需要打开\n                if (cItem) {\n                    this.openKey = item.key;\n                }\n                pre.push(\n                    (\n                        <SubMenu key={item.key} icon={item.icon} title={item.title}>\n                            {this.getMenuNodes_map(item.children)}\n                        </SubMenu>\n                    )\n                )\n            }\n            return pre;\n        }, [])\n    }\n\n    componentWillMount() {\n        this.menuNodes = this.getMenuNodes_reduce(menuList);\n    }\n\n    render() {\n        const path = this.props.location.pathname;\n        const openKey = this.openKey;\n         \n        return (\n            <div>\n                <div className=\"nav\">\n                    <Link to='/home' className=\"nav-header\">\n                        <h1>RBAC</h1>\n                    </Link>\n\n                    <Menu\n                        selectedKeys={[path]}\n                        defaultOpenKeys={[openKey]}\n                        mode=\"inline\"\n                        theme=\"dark\"\n                    >\n                        {\n                            this.menuNodes\n                        }\n\n                    </Menu>\n                </div>\n            </div>\n\n        );\n    }\n}\n\n//withRouter高阶组件：包装非路由组件，返回一个新的组件。\n//新的组件向非路由组件传递3个属性：history、location、match\nexport default withRouter(Nav)\n// export default Nav"]},"metadata":{},"sourceType":"module"}