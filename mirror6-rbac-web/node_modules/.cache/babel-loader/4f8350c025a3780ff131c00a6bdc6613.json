{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{withRouter}from'react-router-dom';import{Modal}from'antd';import{ExclamationCircleOutlined}from'@ant-design/icons';import LinkButton from'../button/button';import{reqWeather}from'../../api/api';import{formatDate}from'../../utils/dateUtil';import memoryUtil from'../../utils/memoryUtil';import storageUtil from'../../utils/storageUtil';import menuList from'../../config/menuConfig';import'./header.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);var _super=_createSuper(Header);function Header(){var _this;_classCallCheck(this,Header);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentTime:formatDate(Date.now()),weather:\"\"};_this.getTime=function(){_this.interval=setInterval(function(){var currentTime=formatDate(Date.now());_this.setState({currentTime:currentTime});},1000);};_this.getWeather=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$reqWeather,weather;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqWeather(330100);case 2:_yield$reqWeather=_context.sent;weather=_yield$reqWeather.weather;_this.setState({weather:weather});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.getTitle=function(){var path=_this.props.location.pathname;var title;menuList.forEach(function(item){if(item.url===path){title=item.title;}else if(item.children){var cItem=item.children.find(function(cItem){return path.indexOf(cItem.url)===0;});if(cItem){title=cItem.title;}}});return title;};_this.logout=function(){Modal.confirm({// title: 'Do you Want to delete these items?',\nicon:/*#__PURE__*/_jsx(ExclamationCircleOutlined,{}),content:'确认退出吗？',onOk:function onOk(){console.log('OK');storageUtil.removeUser();memoryUtil.user={};_this.props.history.replace(\"/login\");},onCancel:function onCancel(){console.log('Cancel');}});};return _this;}_createClass(Header,[{key:\"componentDidMount\",value://第一次render调用\nfunction componentDidMount(){this.getTime();this.getWeather();}//当前组件卸载前调用\n},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"render\",value:function render(){var _this$state=this.state,currentTime=_this$state.currentTime,weather=_this$state.weather;// const { username } = memoryUtil.user.username;\nvar title=this.getTitle();return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-top\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u6B22\\u8FCE\\uFF0C\\u8D85\\u7EA7\\u7BA1\\u7406\\u5458\"}),/*#__PURE__*/_jsx(LinkButton,{onClick:this.logout,children:\"\\u9000\\u51FA\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-bottom-left\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-bottom-right\",children:[/*#__PURE__*/_jsx(\"span\",{children:currentTime}),/*#__PURE__*/_jsx(\"span\",{children:weather})]})]})]});}}]);return Header;}(Component);export default withRouter(Header);","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/components/header/header.jsx"],"names":["React","Component","withRouter","Modal","ExclamationCircleOutlined","LinkButton","reqWeather","formatDate","memoryUtil","storageUtil","menuList","Header","state","currentTime","Date","now","weather","getTime","interval","setInterval","setState","getWeather","getTitle","path","props","location","pathname","title","forEach","item","url","children","cItem","find","indexOf","logout","confirm","icon","content","onOk","console","log","removeUser","user","history","replace","onCancel","clearInterval"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom'\nimport { Modal } from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\n\nimport LinkButton from '../button/button'\nimport { reqWeather } from '../../api/api'\nimport { formatDate } from '../../utils/dateUtil'\nimport memoryUtil from '../../utils/memoryUtil'\nimport storageUtil from '../../utils/storageUtil'\nimport menuList from '../../config/menuConfig'\nimport './header.css'\n\nclass Header extends Component {\n\n    state = {\n        currentTime: formatDate(Date.now()),\n        weather: \"\"\n    }\n\n    getTime = () => {\n        this.interval = setInterval(() => {\n            const currentTime = formatDate(Date.now());\n            this.setState({ currentTime })\n        }, 1000)\n    }\n\n    getWeather = async () => {\n        const { weather } = await reqWeather(330100);\n        this.setState({ weather })\n    }\n\n    getTitle = () => {\n        const path = this.props.location.pathname;\n        let title;\n        menuList.forEach(item => {\n            if (item.url === path) {\n                title = item.title\n            } else if (item.children) {\n                const cItem = item.children.find(cItem => path.indexOf(cItem.url) === 0)\n                if (cItem) {\n                    title = cItem.title\n                }\n            }\n        })\n        return title;\n    }\n\n    logout = () => {\n        Modal.confirm({\n            // title: 'Do you Want to delete these items?',\n            icon: <ExclamationCircleOutlined />,\n            content: '确认退出吗？',\n            onOk: () => {\n                console.log('OK');\n                storageUtil.removeUser();\n                memoryUtil.user = {}\n                this.props.history.replace(\"/login\");\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    //第一次render调用\n    componentDidMount() {\n        this.getTime();\n        this.getWeather();\n    }\n\n    //当前组件卸载前调用\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    render() {\n\n        const { currentTime, weather } = this.state;\n        // const { username } = memoryUtil.user.username;\n        const title = this.getTitle();\n\n        return (\n            <div className=\"header\">\n                <div className=\"header-top\">\n                    <span>欢迎，超级管理员</span>\n                    <LinkButton onClick={this.logout} >退出</LinkButton>\n                </div>\n                <div className=\"header-bottom\">\n                    <div className=\"header-bottom-left\">{title}</div>\n                    <div className=\"header-bottom-right\">\n                        <span>{currentTime}</span>\n                        <span>{weather}</span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}