{"ast":null,"code":"var _jsxFileName = \"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/components/header/header.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Modal } from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\nimport LinkButton from '../button/button';\nimport { reqWeather } from '../../api/api';\nimport { formatDate } from '../../utils/dateUtil';\nimport memoryUtil from '../../utils/memoryUtil';\nimport storageUtil from '../../utils/storageUtil';\nimport menuList from '../../config/menuConfig';\nimport './header.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Header extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentTime: formatDate(Date.now()),\n      weather: \"\"\n    };\n\n    this.getTime = () => {\n      this.interval = setInterval(() => {\n        const currentTime = formatDate(Date.now());\n        this.setState({\n          currentTime\n        });\n      }, 1000);\n    };\n\n    this.getWeather = async () => {\n      const {\n        weather\n      } = await reqWeather(330100);\n      this.setState({\n        weather\n      });\n    };\n\n    this.getTitle = () => {\n      const path = this.props.location.pathname;\n      let title;\n      menuList.forEach(item => {\n        if (item.url === path) {\n          title = item.title;\n        } else if (item.children) {\n          const cItem = item.children.find(cItem => path.indexOf(cItem.url) === 0);\n\n          if (cItem) {\n            title = cItem.title;\n          }\n        }\n      });\n      return title;\n    };\n\n    this.logout = () => {\n      Modal.confirm({\n        // title: 'Do you Want to delete these items?',\n        icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 19\n        }, this),\n        content: '确认退出吗？',\n        onOk: () => {\n          console.log('OK');\n          storageUtil.removeUser();\n          memoryUtil.user = {};\n          this.props.history.replace(\"/login\");\n        },\n\n        onCancel() {\n          console.log('Cancel');\n        }\n\n      });\n    };\n  }\n\n  //第一次render调用\n  componentDidMount() {\n    this.getTime();\n    this.getWeather();\n  } //当前组件卸载前调用\n\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    const {\n      currentTime,\n      weather\n    } = this.state; // const { username } = memoryUtil.user.username;\n\n    const title = this.getTitle();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-top\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u6B22\\u8FCE\\uFF0C\\u8D85\\u7EA7\\u7BA1\\u7406\\u5458\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(LinkButton, {\n          onClick: this.logout,\n          children: \"\\u9000\\u51FA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-bottom-left\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-bottom-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: currentTime\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: weather\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(Header);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/components/header/header.jsx"],"names":["React","Component","withRouter","Modal","ExclamationCircleOutlined","LinkButton","reqWeather","formatDate","memoryUtil","storageUtil","menuList","Header","state","currentTime","Date","now","weather","getTime","interval","setInterval","setState","getWeather","getTitle","path","props","location","pathname","title","forEach","item","url","children","cItem","find","indexOf","logout","confirm","icon","content","onOk","console","log","removeUser","user","history","replace","onCancel","componentDidMount","componentWillUnmount","clearInterval","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom'\nimport { Modal } from 'antd';\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\n\nimport LinkButton from '../button/button'\nimport { reqWeather } from '../../api/api'\nimport { formatDate } from '../../utils/dateUtil'\nimport memoryUtil from '../../utils/memoryUtil'\nimport storageUtil from '../../utils/storageUtil'\nimport menuList from '../../config/menuConfig'\nimport './header.css'\n\nclass Header extends Component {\n\n    state = {\n        currentTime: formatDate(Date.now()),\n        weather: \"\"\n    }\n\n    getTime = () => {\n        this.interval = setInterval(() => {\n            const currentTime = formatDate(Date.now());\n            this.setState({ currentTime })\n        }, 1000)\n    }\n\n    getWeather = async () => {\n        const { weather } = await reqWeather(330100);\n        this.setState({ weather })\n    }\n\n    getTitle = () => {\n        const path = this.props.location.pathname;\n        let title;\n        menuList.forEach(item => {\n            if (item.url === path) {\n                title = item.title\n            } else if (item.children) {\n                const cItem = item.children.find(cItem => path.indexOf(cItem.url) === 0)\n                if (cItem) {\n                    title = cItem.title\n                }\n            }\n        })\n        return title;\n    }\n\n    logout = () => {\n        Modal.confirm({\n            // title: 'Do you Want to delete these items?',\n            icon: <ExclamationCircleOutlined />,\n            content: '确认退出吗？',\n            onOk: () => {\n                console.log('OK');\n                storageUtil.removeUser();\n                memoryUtil.user = {}\n                this.props.history.replace(\"/login\");\n            },\n            onCancel() {\n                console.log('Cancel');\n            },\n        });\n    }\n\n    //第一次render调用\n    componentDidMount() {\n        this.getTime();\n        this.getWeather();\n    }\n\n    //当前组件卸载前调用\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    render() {\n\n        const { currentTime, weather } = this.state;\n        // const { username } = memoryUtil.user.username;\n        const title = this.getTitle();\n\n        return (\n            <div className=\"header\">\n                <div className=\"header-top\">\n                    <span>欢迎，超级管理员</span>\n                    <LinkButton onClick={this.logout} >退出</LinkButton>\n                </div>\n                <div className=\"header-bottom\">\n                    <div className=\"header-bottom-left\">{title}</div>\n                    <div className=\"header-bottom-right\">\n                        <span>{currentTime}</span>\n                        <span>{weather}</span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}