{"ast":null,"code":"import _objectSpread from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Form,Input,Modal,notification}from'antd';import{reqRoleAdd}from'../../../api/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormItem=Form.Item;var RoleAdd=/*#__PURE__*/function(_React$Component){_inherits(RoleAdd,_React$Component);var _super=_createSuper(RoleAdd);function RoleAdd(){var _this;_classCallCheck(this,RoleAdd);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.formRef=/*#__PURE__*/React.createRef();_this.state={};_this.handleOk=function(){var ref=_this.formRef.current;_this.props.toggleVisible(0);ref.validateFields().then(function(values){console.log(values);ref.resetFields();_this.addRole(values);}).catch(function(errorInfo){console.log(errorInfo);});};_this.addRole=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqRoleAdd(data);case 2:result=_context.sent;if(result.code===200){notification.success({duration:2,message:'提示',description:result.msg});_this.props.onRefresh();}else{notification.error({duration:null,message:'提示',description:result.msg});}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onCancel=function(){_this.formRef.current.resetFields();_this.props.toggleVisible(0);};return _this;}_createClass(RoleAdd,[{key:\"render\",value:function render(){var visible=this.props.visible;var formItemLayout={labelCol:{span:6},wrapperCol:{span:14}};return/*#__PURE__*/_jsx(Modal,{visible:visible===1,title:\"\\u6DFB\\u52A0\\u89D2\\u8272\",okText:\"\\u786E\\u5B9A\",cancelText:\"\\u53D6\\u6D88\",onOk:this.handleOk,onCancel:this.onCancel,children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({ref:this.formRef},formItemLayout),{},{children:[/*#__PURE__*/_jsx(FormItem,{name:\"name\",label:\"\\u89D2\\u8272\\u540D\\u79F0\",rules:[{required:true,message:'请输入角色名称'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u89D2\\u8272\\u540D\\u79F0\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"description\",label:\"\\u63CF\\u8FF0\\u4FE1\\u606F\",rules:[{required:true,message:'请输入描述信息'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u63CF\\u8FF0\\u4FE1\\u606F\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"sort\",label:\"\\u6392\\u5E8F\\u7801\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u6392\\u5E8F\\u7801\"})})]}))});}}]);return RoleAdd;}(React.Component);export default RoleAdd;","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/pages/system/role/roleAdd.jsx"],"names":["React","Form","Input","Modal","notification","reqRoleAdd","FormItem","Item","RoleAdd","formRef","createRef","state","handleOk","ref","current","props","toggleVisible","validateFields","then","values","console","log","resetFields","addRole","catch","errorInfo","data","result","code","success","duration","message","description","msg","onRefresh","error","onCancel","visible","formItemLayout","labelCol","span","wrapperCol","required","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Input, Modal, notification } from 'antd'\nimport { reqRoleAdd } from '../../../api/api'\nconst FormItem = Form.Item;\n\nclass RoleAdd extends React.Component {\n\n    formRef = React.createRef();\n\n    state = {}\n\n    //添加验证\n    handleOk = () => {\n        const ref = this.formRef.current;\n        this.props.toggleVisible(0);\n        ref.validateFields()\n            .then(values => {\n                console.log(values)\n                ref.resetFields();\n                this.addRole(values);\n            })\n            .catch(errorInfo => {\n                console.log(errorInfo)\n            });\n    }\n\n    //添加方法\n    addRole = async (data) => {\n        const result = await reqRoleAdd(data);\n        if (result.code === 200) {\n            notification.success({\n                duration: 2,\n                message: '提示',\n                description: result.msg\n            });\n            this.props.onRefresh();\n        } else {\n            notification.error({\n                duration: null,\n                message: '提示',\n                description: result.msg\n            })\n        }\n    }\n\n    //取消\n    onCancel = () => {\n        this.formRef.current.resetFields()\n        this.props.toggleVisible(0);\n    }\n\n    render() {\n\n        const { visible } = this.props\n\n        const formItemLayout = {\n            labelCol: { span: 6 },\n            wrapperCol: { span: 14 }\n        };\n\n        return (\n            <Modal visible={visible === 1} title=\"添加角色\" okText='确定'\n                cancelText='取消' onOk={this.handleOk} onCancel={this.onCancel} >\n\n                <Form ref={this.formRef} {...formItemLayout} >\n\n                    <FormItem name=\"name\" label=\"角色名称\" rules={[\n                        {\n                            required: true,\n                            message: '请输入角色名称',\n                        },\n                    ]} >\n                        <Input placeholder=\"请输入角色名称\" />\n                    </FormItem>\n\n                    <FormItem name=\"description\" label=\"描述信息\" rules={[\n                        {\n                            required: true,\n                            message: '请输入描述信息',\n                        },\n                    ]} >\n                        <Input placeholder=\"请输入描述信息\" />\n                    </FormItem>\n\n                    <FormItem name=\"sort\" label=\"排序码\" >\n                        <Input placeholder=\"请输入排序码\" />\n                    </FormItem>\n\n                </Form>\n            </Modal>\n        )\n    }\n}\n\nexport default RoleAdd;"]},"metadata":{},"sourceType":"module"}