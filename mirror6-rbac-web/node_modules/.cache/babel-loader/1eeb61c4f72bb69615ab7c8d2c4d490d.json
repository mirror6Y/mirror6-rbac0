{"ast":null,"code":"import _objectSpread from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Form,Input,Radio,TreeSelect,Modal}from'antd';import{reqRoleList}from'../../../api/api.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormItem=Form.Item;var UserEdit=/*#__PURE__*/function(_Component){_inherits(UserEdit,_Component);var _super=_createSuper(UserEdit);function UserEdit(){var _this;_classCallCheck(this,UserEdit);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.editRef=/*#__PURE__*/React.createRef();_this.state={treeData:[],// treeData1: [{ title: \"普通角色\", value: \"1305056278851444738\", key: \"1305056278851444738\" },\n// { title: \"学生管理员\", value: \"1305130522406924290\", key: \"1305130522406924290\" }, { title: \"教师管理员\", value: \"1306882513755795458\", key: \"1306882513755795458\" }],\nvalue:undefined// value1: [\"1305056278851444738\"]\n};_this.getTreeData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqRoleList();case 2:result=_context.sent;if(result.code===200){data=result.data;console.log(data);_this.setState({treeData:data});}case 4:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(UserEdit,[{key:\"componentDidMount\",value:function componentDidMount(){this.getTreeData();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var userData=this.props.userData;this.editRef.current.setFieldsValue(_objectSpread({},userData));}},{key:\"UNSAFE_componentWillReceiveProps\",value:function UNSAFE_componentWillReceiveProps(){var userData=this.props.userData;this.setState({value:userData.roleIds});}},{key:\"render\",value:function render(){var formItemLayout={labelCol:{span:6},wrapperCol:{span:14}};var _this$state=this.state,treeData=_this$state.treeData,value=_this$state.value,treeData1=_this$state.treeData1,value1=_this$state.value1;return/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({},formItemLayout),{},{ref:this.editRef,children:[/*#__PURE__*/_jsx(FormItem,{name:\"id\",label:\"\\u4E3B\\u952E\",hidden:true,children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(FormItem,{name:\"account\",label:\"\\u8D26\\u53F7\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\",disabled:true})}),/*#__PURE__*/_jsx(FormItem,{name:\"name\",label:\"\\u59D3\\u540D\",rules:[{required:true,message:'请输入姓名'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u59D3\\u540D\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"gender\",label:\"\\u6027\\u522B\",children:/*#__PURE__*/_jsxs(Radio.Group,{children:[/*#__PURE__*/_jsx(Radio,{value:\"1\",children:\"\\u7537\"}),/*#__PURE__*/_jsx(Radio,{value:\"0\",children:\"\\u5973\"})]})}),/*#__PURE__*/_jsx(FormItem,{name:\"tel\",label:\"\\u624B\\u673A\\u53F7\\u7801\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"email\",label:\"\\u7535\\u5B50\\u90AE\\u7BB1\",rules:[{type:'email',message:'请输入正确的邮箱'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u7535\\u5B50\\u90AE\\u7BB1\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"roleIds\",label:\"\\u89D2\\u8272\",children:/*#__PURE__*/_jsx(TreeSelect,{allowClear:\"true\",treeCheckable:\"true\",treeData:treeData,value:value,showCheckedStrategy:\"SHOW_PARENT\"})})]}));}}]);return UserEdit;}(Component);export default UserEdit;","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/pages/system/user/userEdit.jsx"],"names":["React","Component","Form","Input","Radio","TreeSelect","Modal","reqRoleList","FormItem","Item","UserEdit","editRef","createRef","state","treeData","value","undefined","getTreeData","result","code","data","console","log","setState","userData","props","current","setFieldsValue","roleIds","formItemLayout","labelCol","span","wrapperCol","treeData1","value1","required","message","type"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, Input, Radio, TreeSelect,Modal } from 'antd'\nimport { reqRoleList } from '../../../api/api.js'\n\nconst FormItem = Form.Item;\n\nclass UserEdit extends Component {\n\n    editRef = React.createRef();\n\n    state = {\n        treeData: [],\n        // treeData1: [{ title: \"普通角色\", value: \"1305056278851444738\", key: \"1305056278851444738\" },\n        // { title: \"学生管理员\", value: \"1305130522406924290\", key: \"1305130522406924290\" }, { title: \"教师管理员\", value: \"1306882513755795458\", key: \"1306882513755795458\" }],\n        value: undefined,\n        // value1: [\"1305056278851444738\"]\n    }\n\n    getTreeData = async () => {\n        const result = await reqRoleList();\n        if (result.code === 200) {\n            const data = result.data;\n            console.log(data)\n            this.setState({\n                treeData: data,\n            })\n        }\n    }\n\n    componentDidMount() {\n        this.getTreeData();\n    }\n\n    componentDidUpdate() {\n        const { userData } = this.props;\n        this.editRef.current.setFieldsValue({ ...userData });\n    }\n\n    UNSAFE_componentWillReceiveProps(){\n        const { userData } = this.props;\n\n        this.setState({\n            value: userData.roleIds\n        })\n    }\n\n\n    render() {\n\n        const formItemLayout = {\n            labelCol: { span: 6 },\n            wrapperCol: { span: 14 }\n        };\n\n        const { treeData, value, treeData1, value1 } = this.state;\n\n        return (\n            <Form {...formItemLayout} ref={this.editRef}  >\n                <FormItem name=\"id\" label=\"主键\" hidden>\n                    <Input />\n                </FormItem>\n\n                <FormItem name=\"account\" label=\"账号\" >\n                    <Input placeholder=\"请输入账号\" disabled />\n                </FormItem>\n\n                <FormItem name=\"name\" label=\"姓名\" rules={[\n                    {\n                        required: true,\n                        message: '请输入姓名',\n                    },\n                ]} >\n                    <Input placeholder=\"请输入姓名\" />\n                </FormItem>\n\n                <FormItem name=\"gender\" label=\"性别\">\n                    <Radio.Group>\n                        <Radio value=\"1\">男</Radio>\n                        <Radio value=\"0\">女</Radio>\n                    </Radio.Group>\n                </FormItem>\n\n                <FormItem name=\"tel\" label=\"手机号码\" >\n                    <Input placeholder=\"请输入手机号码\" />\n                </FormItem>\n\n                <FormItem name=\"email\" label=\"电子邮箱\" rules={[\n                    {\n                        type: 'email',\n                        message: '请输入正确的邮箱',\n                    },\n                ]} >\n                    <Input placeholder=\"请输入电子邮箱\" />\n                </FormItem>\n                <FormItem name=\"roleIds\" label=\"角色\">\n                    <TreeSelect\n                        allowClear=\"true\"\n                        treeCheckable=\"true\"\n                        treeData={treeData}\n                        value={value}\n                        showCheckedStrategy=\"SHOW_PARENT\"\n                    />\n                </FormItem>\n            </Form>\n        );\n    }\n}\n\nexport default UserEdit;"]},"metadata":{},"sourceType":"module"}