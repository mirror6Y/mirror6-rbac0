{"ast":null,"code":"import _objectSpread from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Form,Input,Modal,TreeSelect}from'antd';import{reqMenuTree}from'../../../api/api.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FormItem=Form.Item;var formItemLayout={labelCol:{span:6},wrapperCol:{span:14}};var MenuModal=/*#__PURE__*/function(_React$Component){_inherits(MenuModal,_React$Component);var _super=_createSuper(MenuModal);function MenuModal(){var _this;_classCallCheck(this,MenuModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.formRef=/*#__PURE__*/React.createRef();_this.state={treeData:[]};_this.onOk=function(){var user=_this.formRef.current.getFieldsValue();_this.props.handleOk(user);};_this.getTreeData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqMenuTree();case 2:result=_context.sent;if(result.code===200){data=result.data;_this.treeFormat(data);}case 4:case\"end\":return _context.stop();}}},_callee);}));_this.treeFormat=function(data){data.map(function(item,index){item['value']=item.id;item['key']=item.id;item['children']=item.childList;delete item['id'];delete item['childList'];_this.treeFormat(item.children);});_this.setState({treeData:data});};return _this;}_createClass(MenuModal,[{key:\"componentDidMount\",value:function componentDidMount(){this.getTreeData();}},{key:\"render\",value:function render(){var _this$props=this.props,visible=_this$props.visible,modalStatus=_this$props.modalStatus,currentItem=_this$props.currentItem;var treeData=this.state.treeData;return/*#__PURE__*/_jsx(Modal,{visible:visible,title:\"\".concat(modalStatus==='add'?'添加':'编辑',\"\\u83DC\\u5355\"),okText:\"\\u786E\\u5B9A\",cancelText:\"\\u53D6\\u6D88\",onOk:this.onOk.bind(this),onCancel:this.props.onCancel,children:/*#__PURE__*/_jsxs(Form,_objectSpread(_objectSpread({ref:this.formRef,initialValues:currentItem},formItemLayout),{},{children:[/*#__PURE__*/_jsx(FormItem,{name:\"id\",label:\"\\u4E3B\\u952E\",hidden:true,children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(FormItem,{name:\"parentId\",label:\"\\u7236\\u7EA7\\u83DC\\u5355\",rules:[{required:true,message:'请选择父级菜单'}],children:/*#__PURE__*/_jsx(TreeSelect,{treeData:treeData})}),/*#__PURE__*/_jsx(FormItem,{name:\"title\",label:\"\\u83DC\\u5355\\u540D\\u79F0\",rules:[{required:true,message:'请输入菜单名称'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u83DC\\u5355\\u540D\\u79F0\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"description\",label:\"\\u63CF\\u8FF0\\u4FE1\\u606F\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u63CF\\u8FF0\\u4FE1\\u606F\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"url\",label:\"url\",rules:[{required:true,message:'请输入url'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165url\"})}),/*#__PURE__*/_jsx(FormItem,{name:\"icon\",label:\"\\u56FE\\u6807\\u4FE1\\u606F\",children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u56FE\\u6807\\u4FE1\\u606F\"})})]}))});}}]);return MenuModal;}(React.Component);export default MenuModal;","map":{"version":3,"sources":["/Users/mirror6/IdeaProjects/mirror6-rbac0/mirror6-rbac-web/src/pages/system/menu/menuModal.jsx"],"names":["React","Form","Input","Modal","TreeSelect","reqMenuTree","FormItem","Item","formItemLayout","labelCol","span","wrapperCol","MenuModal","formRef","createRef","state","treeData","onOk","user","current","getFieldsValue","props","handleOk","getTreeData","result","code","data","treeFormat","map","item","index","id","childList","children","setState","visible","modalStatus","currentItem","bind","onCancel","required","message","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Input, Modal, TreeSelect } from 'antd'\nimport { reqMenuTree } from '../../../api/api.js'\n\n\nconst FormItem = Form.Item;\nconst formItemLayout = {\n    labelCol: { span: 6 },\n    wrapperCol: { span: 14 }\n};\n\nclass MenuModal extends React.Component {\n\n    formRef = React.createRef();\n\n    state = {\n        treeData: []\n    }\n\n    componentDidMount() {\n        this.getTreeData();\n    }\n\n    onOk = () => {\n        let user = this.formRef.current.getFieldsValue();\n        this.props.handleOk(user);\n    }\n\n    getTreeData = async () => {\n        const result = await reqMenuTree();\n        if (result.code === 200) {\n            const data = result.data;\n            this.treeFormat(data);\n        }\n    }\n\n    treeFormat = (data) => {\n        data.map((item, index) => {\n            item['value'] = item.id;\n            item['key'] = item.id;\n            item['children'] = item.childList\n            delete item['id'];\n            delete item['childList'];\n            this.treeFormat(item.children);\n        });\n        this.setState({\n            treeData: data\n        });\n    }\n\n\n    render() {\n\n        const { visible, modalStatus, currentItem } = this.props\n        const { treeData } = this.state\n\n\n        return (\n\n            <Modal\n                visible={visible}\n                title={`${modalStatus === 'add' ? '添加' : '编辑'}菜单`}\n                okText='确定'\n                cancelText='取消'\n                onOk={this.onOk.bind(this)}\n                onCancel={this.props.onCancel}\n            >\n                <Form ref={this.formRef} initialValues={currentItem} {...formItemLayout} >\n\n                    <FormItem name=\"id\" label=\"主键\" hidden>\n                        <Input />\n                    </FormItem>\n\n                    <FormItem name=\"parentId\" label=\"父级菜单\"\n                        rules={[{ required: true, message: '请选择父级菜单' }]}>\n                        <TreeSelect\n                            treeData={treeData}\n                        />\n                    </FormItem>\n\n                    <FormItem name=\"title\" label=\"菜单名称\" rules={[\n                        {\n                            required: true,\n                            message: '请输入菜单名称',\n                        }\n                    ]} >\n                        <Input placeholder=\"请输入菜单名称\" />\n                    </FormItem>\n\n                    <FormItem name=\"description\" label=\"描述信息\" >\n                        <Input placeholder=\"请输入描述信息\" />\n                    </FormItem>\n\n                    <FormItem name=\"url\" label=\"url\" rules={[\n                        {\n                            required: true,\n                            message: '请输入url',\n                        }\n                    ]} >\n                        <Input placeholder=\"请输入url\" />\n                    </FormItem>\n\n                    <FormItem name=\"icon\" label=\"图标信息\" >\n                        <Input placeholder=\"请输入图标信息\" />\n                    </FormItem>\n\n                </Form>\n            </Modal>\n\n        )\n    }\n}\n\nexport default MenuModal;"]},"metadata":{},"sourceType":"module"}